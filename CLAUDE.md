# Git Work Summarizer - Project Instructions

## Overview
A tool to summarize yearly git work across multiple repositories, generating Excel reports with file-based change history.

## Tech Stack
- **Frontend/API**: Next.js 14 (App Router) - Port 4000
- **Backend Processing**: Rust (git operations) - Port 8080
- **Database**: MySQL (metadata storage)

## Architecture

### Next.js App (`/app`)
- Dashboard for managing repos and credentials
- API routes for CRUD operations
- Excel export with 3 sheets:
  1. **Summary**: AI-generated progress report of all work
  2. **File Summary**: Changes grouped by file with version history
  3. **Git Commits**: Raw commit data

### Rust Service (`/rust-service`)
- Git operations (clone, fetch, log parsing)
- Commit extraction and file change tracking
- High-performance batch processing

## Database Schema
```sql
-- repositories: Store git repo configs
-- credentials: Git credentials (encrypted)
-- commits: Parsed commit data with file paths
-- exports: Export job tracking
```

## API Endpoints
- `POST /api/repos` - Add repository
- `POST /api/credentials` - Add git credentials
- `POST /api/analyze` - Start analysis job (parses commits)
- `GET /api/commits` - List commits with filters
- `GET /api/authors` - List unique authors
- `POST /api/export` - Generate Excel export (2 sheets)

## Environment Variables
```
DATABASE_URL=mysql://user:pass@localhost:3306/git-doc
GEMINI_API_KEY= (optional, for future use)
GEMINI_API_KEY= (optional, for future use)
JIRA_API_TOKEN= (optional)
JIRA_BASE_URL= (optional)
```

## Development
```bash
# Start all services
./start.sh

# Stop all services
./stop.sh

# Manual start - Next.js
pnpm dev

# Manual start - Rust service
cd rust-service && cargo build --release
./target/release/git-doc-service
```

## Export Format

### Sheet 1: Summary (AI-Generated)
A professional Development Progress Report generated by AI that summarizes all work done in the report period. Includes:
- Report title and date range
- Author(s), repositories, and statistics
- Organized summary of accomplishments by category
- Written in readable prose for both technical and non-technical audiences

### Sheet 2: File Summary
Groups all changes by file path showing version history:
```
File: /src/app/page.tsx
Changes:
  27/12/2025
  - feat: add new component
  - fix: button styling

  25/12/2025
  - initial page setup
```

### Sheet 3: Git Commits
| Date Time | Repository | Commit Name | Commit Description | Commit Code | Changed Files | Files Count | JIRA Link | Author |
